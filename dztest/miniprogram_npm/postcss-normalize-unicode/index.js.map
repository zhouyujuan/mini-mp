{"version":3,"sources":["index.js"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.js","sourcesContent":["\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _browserslist = require('browserslist');\n\nvar _browserslist2 = _interopRequireDefault(_browserslist);\n\nvar _postcss = require('postcss');\n\nvar _postcss2 = _interopRequireDefault(_postcss);\n\nvar _postcssValueParser = require('postcss-value-parser');\n\nvar _postcssValueParser2 = _interopRequireDefault(_postcssValueParser);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst regexLowerCaseUPrefix = /^u(?=\\+)/;\n\nfunction unicode(range) {\n    const values = range.slice(2).split('-');\n    if (values.length < 2) {\n        return range;\n    }\n    const left = values[0].split('');\n    const right = values[1].split('');\n\n    if (left.length !== right.length) {\n        return range;\n    }\n\n    let questionCounter = 0;\n\n    const merged = left.reduce((group, value, index) => {\n        if (group === false) {\n            return false;\n        }\n        if (value === right[index] && !questionCounter) {\n            return group + value;\n        }\n        if (value === '0' && right[index] === 'f') {\n            questionCounter++;\n            return group + '?';\n        }\n        return false;\n    }, 'u+');\n\n    /*\n     * The maximum number of wildcard characters (?) for ranges is 5.\n     */\n\n    if (merged && questionCounter < 6) {\n        return merged;\n    }\n\n    return range;\n}\n\n/*\n * IE and Edge before 16 version ignore the unicode-range if the 'U' is lowercase\n *\n * https://caniuse.com/#search=unicode-range\n */\n\nfunction hasLowerCaseUPrefixBug(browser) {\n    return ~(0, _browserslist2.default)('ie <=11, edge <= 15').indexOf(browser);\n}\n\nfunction transform(legacy = false, node) {\n    node.value = (0, _postcssValueParser2.default)(node.value).walk(child => {\n        if (child.type === 'word') {\n            const transformed = unicode(child.value.toLowerCase());\n            child.value = legacy ? transformed.replace(regexLowerCaseUPrefix, 'U') : transformed;\n        }\n        return false;\n    }).toString();\n}\n\nexports.default = _postcss2.default.plugin('postcss-normalize-unicode', () => {\n    return (css, result) => {\n        const resultOpts = result.opts || {};\n        const browsers = (0, _browserslist2.default)(null, {\n            stats: resultOpts.stats,\n            path: __dirname,\n            env: resultOpts.env\n        });\n        css.walkDecls(/^unicode-range$/i, transform.bind(null, browsers.some(hasLowerCaseUPrefixBug)));\n    };\n});\nmodule.exports = exports['default'];"]}