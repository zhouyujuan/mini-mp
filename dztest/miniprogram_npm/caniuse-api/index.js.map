{"version":3,"sources":["index.js","utils.js"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AACA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA,ACHA;ADIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.js","sourcesContent":["\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getBrowserScope = exports.setBrowserScope = exports.getLatestStableBrowsers = exports.find = exports.isSupported = exports.getSupport = exports.features = undefined;\n\nvar _lodash = require(\"lodash.memoize\");\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _browserslist = require(\"browserslist\");\n\nvar _browserslist2 = _interopRequireDefault(_browserslist);\n\nvar _caniuseLite = require(\"caniuse-lite\");\n\nvar _utils = require(\"./utils\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar featuresList = Object.keys(_caniuseLite.features);\n\nvar browsers = void 0;\nfunction setBrowserScope(browserList) {\n  browsers = (0, _utils.cleanBrowsersList)(browserList);\n}\n\nfunction getBrowserScope() {\n  return browsers;\n}\n\nvar parse = (0, _lodash2.default)(_utils.parseCaniuseData, function (feat, browsers) {\n  return feat.title + browsers;\n});\n\nfunction getSupport(query) {\n  var feature = void 0;\n  try {\n    feature = (0, _caniuseLite.feature)(_caniuseLite.features[query]);\n  } catch (e) {\n    var res = find(query);\n    if (res.length === 1) return getSupport(res[0]);\n    throw new ReferenceError(\"Please provide a proper feature name. Cannot find \" + query);\n  }\n  return parse(feature, browsers);\n}\n\nfunction isSupported(feature, browsers) {\n  var data = void 0;\n  try {\n    data = (0, _caniuseLite.feature)(_caniuseLite.features[feature]);\n  } catch (e) {\n    var res = find(feature);\n    if (res.length === 1) {\n      data = _caniuseLite.features[res[0]];\n    } else {\n      throw new ReferenceError(\"Please provide a proper feature name. Cannot find \" + feature);\n    }\n  }\n\n  return (0, _browserslist2.default)(browsers, { ignoreUnknownVersions: true }).map(function (browser) {\n    return browser.split(\" \");\n  }).every(function (browser) {\n    return data.stats[browser[0]] && data.stats[browser[0]][browser[1]] === \"y\";\n  });\n}\n\nfunction find(query) {\n  if (typeof query !== \"string\") {\n    throw new TypeError(\"The `query` parameter should be a string.\");\n  }\n\n  if (~featuresList.indexOf(query)) {\n    // exact match\n    return query;\n  }\n\n  return featuresList.filter(function (file) {\n    return (0, _utils.contains)(file, query);\n  });\n}\n\nfunction getLatestStableBrowsers() {\n  return (0, _browserslist2.default)(\"last 1 version\");\n}\n\nsetBrowserScope();\n\nexports.features = featuresList;\nexports.getSupport = getSupport;\nexports.isSupported = isSupported;\nexports.find = find;\nexports.getLatestStableBrowsers = getLatestStableBrowsers;\nexports.setBrowserScope = setBrowserScope;\nexports.getBrowserScope = getBrowserScope;","\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.contains = contains;\nexports.parseCaniuseData = parseCaniuseData;\nexports.cleanBrowsersList = cleanBrowsersList;\n\nvar _lodash = require(\"lodash.uniq\");\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _browserslist = require(\"browserslist\");\n\nvar _browserslist2 = _interopRequireDefault(_browserslist);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction contains(str, substr) {\n  return !!~str.indexOf(substr);\n}\n\nfunction parseCaniuseData(feature, browsers) {\n  var support = {};\n  var letters;\n  var letter;\n\n  browsers.forEach(function (browser) {\n    support[browser] = {};\n    for (var info in feature.stats[browser]) {\n      letters = feature.stats[browser][info].replace(/#\\d+/, \"\").trim().split(\" \");\n      info = parseFloat(info.split(\"-\")[0]); //if info is a range, take the left\n      if (isNaN(info)) continue;\n      for (var i = 0; i < letters.length; i++) {\n        letter = letters[i];\n        if (letter === \"d\") {\n          // skip this letter, we don't support it yet\n          continue;\n        } else if (letter === \"y\") {\n          // min support asked, need to find the min value\n          if (typeof support[browser][letter] === \"undefined\" || info < support[browser][letter]) {\n            support[browser][letter] = info;\n          }\n        } else {\n          // any other support, need to find the max value\n          if (typeof support[browser][letter] === \"undefined\" || info > support[browser][letter]) {\n            support[browser][letter] = info;\n          }\n        }\n      }\n    }\n  });\n\n  return support;\n}\n\nfunction cleanBrowsersList(browserList) {\n  return (0, _lodash2.default)((0, _browserslist2.default)(browserList).map(function (browser) {\n    return browser.split(\" \")[0];\n  }));\n}"]}