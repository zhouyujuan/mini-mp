"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.compile=void 0;const game_1=require("./game"),mini_program_1=require("./mini_program"),mini_program_plugin_1=require("./mini_program_plugin"),game_plugin_1=require("./game_plugin"),config_1=require("../config"),reactiveCache_1=require("../json/reactiveCache");async function compile(e,i){const o=reactiveCache_1.tryToGetReactiveProject(e);return await o.updateProject(),i.__compileDebugInfo__?i.__compileDebugInfo__.ciVersion=config_1.CI_VERSION:i.__compileDebugInfo__={from:"ci",useNewCompileModule:!0,devtoolsVersion:"0",compileSetting:i.setting,ciVersion:config_1.CI_VERSION},process.env.isDevtools&&(e.nameMappingFromDevtools=i.nameMapping||{}),e.type===config_1.COMPILE_TYPE.miniGame?game_1.compile(e,i):e.type===config_1.COMPILE_TYPE.miniProgramPlugin?mini_program_plugin_1.compile(e,i):e.type===config_1.COMPILE_TYPE.miniGamePlugin?game_plugin_1.compile(e,i):mini_program_1.compile(e,i)}exports.compile=compile;