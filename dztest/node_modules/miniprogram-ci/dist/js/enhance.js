"use strict";const sourcemap=()=>require("source-map"),babel7=()=>require("@babel/core"),_pluginTransformRuntime=()=>require("@babel/plugin-transform-runtime"),_pluginTransformModulesCommonjs=()=>require("@babel/plugin-transform-modules-commonjs"),_presetEnv=()=>require("@babel/preset-env"),config_1=require("../config"),babel_helper_1=require("../utils/babel_helper"),_transformRuntimeCustom=()=>require("../utils/babel_transform_plugin");function getPluginsList(e){const r=[[require("../utils/babel_transform_plugin")],[require("@babel/plugin-transform-runtime"),{corejs:!1,helpers:!0,regenerator:!e.hasRegenerator}]].concat(babel_helper_1.getCustomPlugins([]));return e.disableUseStrict&&r.push([require("@babel/plugin-transform-modules-commonjs"),{allowTopLevelThis:!0}]),r}const enhance=e=>{const{code:r,babelRoot:s,filePath:t,inputSourceMap:l}=e,o=r,n=/regeneratorRuntime\.mark/.test(r),a=/^\s*\/\/\s?use strict disable;/i.test(r);let i;try{i=require("@babel/core").transform(r,{presets:[[require("@babel/preset-env"),{targets:{chrome:53,ios:8},include:["@babel/plugin-transform-computed-properties"]}]],babelrc:!1,plugins:getPluginsList({hasRegenerator:n,disableUseStrict:a}),sourceFileName:t,inputSourceMap:l,sourceMaps:!0,configFile:!1})}catch(e){return{error:{message:`file: ${t}\n ${e.message}`,code:config_1.BABEL_TRANS_JS_ERR}}}let u=i&&i.code||r;const c=i&&i.map||l;a&&(u=u.replace(/^"use strict";/,""));const b=babel_helper_1.collectBabelHelpers(o),{transformCode:p,helpers:m}=babel_helper_1.replaceBabelHelpers(u,b,t,s);return u=p,{code:u,map:c,helpers:m||[]}};module.exports=enhance;