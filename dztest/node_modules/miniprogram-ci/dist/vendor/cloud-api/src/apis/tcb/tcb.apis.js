"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tcbDescribeVoucherApplication=exports.tcbApplyVoucher=exports.tcbDescribeVoucherPlanAvailable=exports.tcbDescribeAllVouchersInfo=exports.tcbDescribeVouchersInfo=exports.tcbDescribeAmountAfterDeduction=exports.tcbDescribeAllVouchersInfoByDeal=exports.tcbDescribeVouchersInfoByDeal=exports.tcbDescribeResourceRecoverJob=exports.tcbResourceRecover=exports.tcbDescribeEnvResourceException=exports.tcbDescribeAuthentification=exports.tcbRevokeInvoice=exports.tcbDescribeInvoiceDetail=exports.tcbDescribeInvoiceList=exports.tcbCreateInvoice=exports.tcbDeleteInvoicePostInfo=exports.tcbModifyInvoicePostInfo=exports.tcbCreateInvoicePostInfo=exports.tcbDescribeInvoicePostInfo=exports.tcbSetInvoiceSubject=exports.tcbDescribeInvoiceSubject=exports.tcbDescribeInvoiceAmount=exports.tcbDescribeNextExpireTime=exports.tcbDescribeBillingInfo=exports.tcbCheckEnvPackageModify=exports.tcbDeleteDeal=exports.tcbCancelDeal=exports.tcbQueryAllDeals=exports.tcbQueryDeals=exports.tcbDescribePayInfo=exports.tcbCreateDeal=exports.tcbInqueryPrice=exports.tcbDescribePackages=exports.tcbCreateEnvAndResource=exports.tcbCheckEnvId=exports.tcbDescribeSafeRule=exports.tcbModifySafeRule=exports.tcbDatabaseMigrateQueryInfo=exports.tcbDatabaseMigrateExport=exports.tcbDatabaseMigrateImport=exports.tcbModifyDatabaseACL=exports.tcbDescribeDatabaseACL=exports.tcbModifyStorageACL=exports.tcbGetStorageACLTask=exports.tcbDescribeCurveData=exports.tcbGetMonitorData=exports.tcbGetStorageACL=exports.tcbGetDbDistribution=exports.tcbGetUsers=void 0,exports.tcbDescribeCloudBaseRunServerVersion=exports.tcbCreateCloudBaseRunServerVersion=exports.tcbDescribeCloudBaseRunContainerSpec=exports.tcbDescribeCloudBaseRunServer=exports.tcbDescribeCloudBaseRunBuildServer=exports.tcbCreateCloudBaseRunResource=exports.tcbDescribeCloudBaseRunServers=exports.tcbDescribeCloudBaseRunResource=exports.tcbDescribeHostingDomain=exports.tcbDescribeEnvFreeQuota=exports.tcbDescribeAccountInfoByPlatformId=exports.tcbDescribeEnvLimit=exports.tcbDescribeStaticStore=exports.tcbDestroyStaticStore=exports.tcbCreateStaticStore=exports.tcbModifySecurityRule=exports.tcbDescribeSecurityRule=exports.tcbUpdateLoginConfig=exports.tcbCreateLoginConfig=exports.tcbDescribeLoginConfigs=exports.tcbDescribeCDNChainTask=exports.tcbDescribeStorageSafeRule=exports.tcbModifyStorageSafeRule=exports.tcbDescribePostpayFreeQuotas=exports.tcbInqueryPostpayPrice=exports.tcbCreatePostpayPackage=exports.tcbCommonServiceAPI=exports.tcbDescribeRestoreHistory=exports.tcbDescribeChangePay=exports.tcbDescribeDauData=exports.tcbModifyMonitorCondition=exports.tcbDeleteMonitorCondition=exports.tcbCreateMonitorCondition=exports.tcbDescribeMonitorCondition=exports.tcbModifyMonitorPolicy=exports.tcbDeleteMonitorPolicy=exports.tcbCreateMonitorPolicy=exports.tcbDescribeMonitorPolicy=exports.tcbDescribeMonitorResource=exports.tcbDeleteVoucherApplication=void 0;const transactor_1=require("../../transaction/transactor"),tcbContracts=require("../../transaction/contracts/contracts"),common_1=require("../../utils/common");function tcbGenderToCCUserGender(e){switch(e){case 2:case 1:case 0:return e;default:return-1}}function formatAvatarUrl(e){return(e=e.trim()).startsWith("http://")&&(e=e.replace("http://","https://")),e&&!/\/\d+$/.test(e)&&(e+="/0"),e}async function tcbGetUsers(e){const t={Action:"DescribeUsers",Version:"2018-06-08",EnvId:e.envId,Region:e.region,Keyword:e.keyword,Offset:e.offset,Limit:e.limit,WxAppId:e.appId||transactor_1.getDefaultAppID()};try{const e=await transactor_1.default(tcbContracts.tcbGetUsersContract,t);return{total:e.Total,users:e.Users.map(e=>({openId:e.OpenId,grantUserInfo:e.GrantUserInfo,nickName:e.NickName,country:e.Country,province:e.Province,city:e.City,gender:tcbGenderToCCUserGender(e.Gender),language:e.Language,avatarUrl:formatAvatarUrl(e.AvatarUrl),createTime:common_1.strToDate(e.CreateTime),updateTime:common_1.strToDate(e.UpdateTime)})),requestId:e.RequestId}}catch(e){throw e}}async function tcbGetDbDistribution(e){const t={Action:"DescribeDbDistribution",Version:"2018-06-08",EnvId:e.envId,Region:e.region,WxAppId:e.appId||transactor_1.getDefaultAppID()};return{collections:((await transactor_1.default(tcbContracts.tcbDescribeDbDistributionContract,t)).Collections||[]).map(e=>({collectionName:e.CollectionName,docCount:e.DocCount}))}}async function tcbGetStorageACL(e){const t={Action:"DescribeStorageACL",Version:"2018-06-08",Region:e.region,WxAppId:e.appId||transactor_1.getDefaultAppID(),Bucket:e.bucket,EnvId:e.envId};return{aclTag:(await transactor_1.default(tcbContracts.tcbDescribeStorageACLContract,t)).AclTag}}async function tcbGetMonitorData(e){const t={Action:"DescribeMonitorData",Version:"2018-06-08",Region:e.region,MetricName:e.metricName,StartTime:common_1.dateToStr(e.startTime),EndTime:common_1.dateToStr(e.endTime),EnvId:e.envId,WxAppId:e.appId||transactor_1.getDefaultAppID(),ResourceID:e.resourceID,SubresourceID:e.subresourceID},o=await transactor_1.default(tcbContracts.tcbDescribeMonitorDataContract,t);return{startTime:common_1.strToDate(o.StartTime),endTime:common_1.strToDate(o.EndTime),metricName:o.MetricName,period:o.Period,values:o.Values}}async function tcbDescribeCurveData(e){const t={Action:"DescribeCurveData",Version:"2018-06-08",Region:e.region,MetricName:e.metricName,StartTime:common_1.dateToStr(e.startTime),EndTime:common_1.dateToStr(e.endTime),EnvId:e.envId,WxAppId:e.appId||transactor_1.getDefaultAppID(),ResourceID:e.resourceID},o=await transactor_1.default(tcbContracts.tcbDescribeCurveDataContract,t);return{startTime:common_1.strToDate(o.StartTime),endTime:common_1.strToDate(o.EndTime),metricName:o.MetricName,period:o.Period,values:o.Values,time:o.Time}}async function tcbGetStorageACLTask(e,t){const o={Action:"DescribeStorageACLTask",Version:"2018-06-08",Region:e.region,WxAppId:e.appId||transactor_1.getDefaultAppID(),Bucket:e.bucket,EnvId:e.envId};return{status:(await transactor_1.default(tcbContracts.tcbDescribeStorageACLTaskContract,o,{isPoll:t})).Status}}async function tcbModifyStorageACL(e){const t={Action:"ModifyStorageACL",Version:"2018-06-08",Region:e.region,WxAppId:e.appId||transactor_1.getDefaultAppID(),Bucket:e.bucket,EnvId:e.envId,AclTag:e.aclTag};return await transactor_1.default(tcbContracts.tcbModifyStorageACLContract,t),{}}async function tcbDescribeDatabaseACL(e){const t={Action:"DescribeDatabaseACL",Version:"2018-06-08",Region:e.region,WxAppId:e.appId||transactor_1.getDefaultAppID(),CollectionName:e.collectionName,EnvId:e.envId};return{aclTag:(await transactor_1.default(tcbContracts.tcbDescribeDatabaseACLContract,t)).AclTag}}async function tcbModifyDatabaseACL(e){const t={Action:"ModifyDatabaseACL",Version:"2018-06-08",Region:e.region,WxAppId:e.appId||transactor_1.getDefaultAppID(),CollectionName:e.collectionName,EnvId:e.envId,AclTag:e.aclTag};return await transactor_1.default(tcbContracts.tcbModifyDatabaseACLContract,t),{}}async function tcbDatabaseMigrateImport(e){const t={Action:"DatabaseMigrateImport",Version:"2018-06-08",Region:e.region,WxAppId:e.appId||transactor_1.getDefaultAppID(),EnvId:e.envId,CollectionName:e.collectionName,FileType:e.fileType,FilePath:e.filePath,StopOnError:e.stopOnError,ConflictMode:e.conflictMode};return{jobId:(await transactor_1.default(tcbContracts.tcbDatabaseMigrateImportContract,t)).JobId}}async function tcbDatabaseMigrateExport(e){const t={Action:"DatabaseMigrateExport",Version:"2018-06-08",Region:e.region,WxAppId:e.appId||transactor_1.getDefaultAppID(),EnvId:e.envId,CollectionName:e.collectionName,FileType:e.fileType,FilePath:e.filePath,Query:e.query,Fields:e.fields,Skip:e.skip,Limit:e.limit,Sort:e.sort};return{jobId:(await transactor_1.default(tcbContracts.tcbDatabaseMigrateExportContract,t)).JobId}}async function tcbDatabaseMigrateQueryInfo(e,t){const o={Action:"DatabaseMigrateQueryInfo",Version:"2018-06-08",Region:e.region,WxAppId:e.appId||transactor_1.getDefaultAppID(),EnvId:e.envId,JobId:e.jobId},r=await transactor_1.default(tcbContracts.tcbDatabaseMigrateQueryInfoContract,o,{isPoll:t});return{status:r.Status,recordSuccess:r.RecordSuccess,recordFail:r.RecordFail,errorMsg:r.ErrorMsg,fileUrl:r.FileUrl}}async function tcbModifySafeRule(e){const t={Action:"ModifySafeRule",Version:"2018-06-08",Region:e.region,EnvId:e.envId,CollectionName:e.collectionName,AclTag:e.aclTag,Rule:e.rule};return await transactor_1.default(tcbContracts.tcbModifySafeRuleContract,t),{}}async function tcbDescribeSafeRule(e){const t={Action:"DescribeSafeRule",Version:"2018-06-08",Region:e.region,EnvId:e.envId,CollectionName:e.collectionName},o=await transactor_1.default(tcbContracts.tcbDescribeSafeRuleContract,t);return{rule:o.Rule,aclTag:o.AclTag}}async function tcbCheckEnvId(e){const t={Action:"CheckEnvId",Version:"2018-06-08",Region:e.region,WxAppId:e.appId||transactor_1.getDefaultAppID(),EnvId:e.envId},o=await transactor_1.default(tcbContracts.tcbCheckEnvIdContract,t);return{exist:!0===o.Exist||"string"==typeof o.Exist&&"true"===o.Exist.toLowerCase()}}async function tcbCreateEnvAndResource(e){const t={Action:"CreateEnvAndResource",Version:"2018-06-08",Region:e.region,WxAppId:e.appId||transactor_1.getDefaultAppID(),EnvId:e.envId,Alias:e.alias,Source:e.source||"miniapp",Channel:e.channel||"ide"};return await transactor_1.default(tcbContracts.tcbCreateEnvAndResourceContract,t),{}}async function tcbDescribePackages(e){const t={Action:"DescribePackages",Version:"2018-06-08",Region:e.region,PackageId:e.packageId,EnvId:e.envId,Source:e.source};return{packages:((await transactor_1.default(tcbContracts.tcbDescribePackagesContract,t)).Packages||[]).map(e=>{let t;try{t=JSON.parse(e.Detail)||{}}catch(e){console.error(e),t={}}return{packageId:e.PackageId||"",name:e.Name||"",desc:e.Desc||"",detail:t,pid:e.Pid,packageType:e.PackageType}})}}async function tcbInqueryPrice(e){const t={Action:"InqueryPrice",Version:"2018-06-08",Region:e.region,QueryType:e.queryType,UserClientIp:e.userClientIp,PackageId:e.packageId,EnvId:e.envId,TimeSpan:e.timeSpan,TimeUnit:e.timeUnit,WxAppId:e.appId||transactor_1.getDefaultAppID(),Source:e.source},o=await transactor_1.default(tcbContracts.tcbInqueryPriceContract,t);return{price:isNaN(o.Price)?-1:o.Price}}async function tcbCreateDeal(e){const t={Action:"CreateDeal",Version:"2018-06-08",Region:e.region,DealType:e.dealType,EnvId:e.alias?void 0:e.envId,UserClientIp:e.userClientIp,PackageId:e.packageId,TimeSpan:e.timeSpan,TimeUnit:e.timeUnit,WxAppId:e.appId||transactor_1.getDefaultAppID(),ForceToModify:e.forceToModify,Source:e.source,IsAutoRenew:e.isAutoRenew,ChangePay:e.changePay,EnvSource:e.alias?"miniapp":void 0,Alias:e.alias?e.alias:void 0,Channel:e.alias?"ide":void 0},o=await transactor_1.default(tcbContracts.tcbCreateDealContract,t);return{tranId:o.TranId,envId:o.EnvId,modifyFailReason:(o.ModifyFailReason||[]).map(e=>({resourceName:e.ResourceName||"",indexName:e.IndexName||"",indexShowName:e.IndexShowName||"",indexUseAmount:isNaN(e.IndexUseAmount)?-1:e.IndexUseAmount,indexUseUnit:e.IndexUseUnit||""}))}}async function tcbDescribePayInfo(e){const t={Action:"DescribePayInfo",Version:"2018-06-08",Region:e.region,TranId:e.tranId,UserClientIp:e.userClientIp,WxAppId:e.appId||transactor_1.getDefaultAppID()};e.voucherId&&(t.VoucherId=e.voucherId);const o=await transactor_1.default(tcbContracts.tcbDescribePayInfoContract,t);return{payCode:o.PayCode,appId:o.AppId,isFreeOrRefundDeal:o.IsFreeOrRefundDeal}}async function tcbQueryDeals(e){const t={Action:"QueryDeals",Version:"2018-06-08",Region:e.region,UserClientIp:e.userClientIp,WxAppId:e.appId||transactor_1.getDefaultAppID(),TranId:e.tranId,DealStatus:e.dealStatus,Limit:e.limit,Offset:e.offset,ReturnPostpayDeal:e.returnPostpayDeal},o=await transactor_1.default(tcbContracts.tcbQueryDealsContract,t);return{total:o.Total||0,deals:(o.Deals||[]).map(e=>({tranId:e.TranId,dealOwner:e.DealOwner,createTime:common_1.strToDate(e.CreateTime),packageId:e.PackageId,dealStatus:e.DealStatus,dealCost:e.DealCost,envId:e.EnvId,payTime:common_1.strToDate(e.PayTime),timeSpan:e.TimeSpan,price:e.Price,payMode:e.PayMode,productName:e.ProductName,timeUnit:e.TimeUnit,refundAmount:e.RefundAmount,dealStatusDes:e.DealStatusDes||"",voucherDecline:e.VoucherDecline||null,hasReturnPayCode:e.HasReturnPayCode||null,source:e.Source||null}))}}async function tcbQueryAllDeals(e,t=[],o=0){const r=e.limit||50,{total:a,deals:n}=await tcbQueryDeals({region:e.region,userClientIp:e.userClientIp,appId:e.appId,tranId:e.tranId,dealStatus:e.dealStatus,returnPostpayDeal:e.returnPostpayDeal,limit:r,offset:o});return n.length&&n.length>=r?tcbQueryAllDeals(e,[...t,...n],o+r):{total:a,deals:[...t,...n]}}async function tcbCancelDeal(e){const t={Action:"CancelDeal",Version:"2018-06-08",Region:e.region,UserClientIp:e.userClientIp,DealOwner:e.dealOwner,TranId:e.tranId,WxAppId:e.appId||transactor_1.getDefaultAppID()};await transactor_1.default(tcbContracts.tcbCancelDealContract,t);return{}}async function tcbDeleteDeal(e){const t={Action:"DeleteDeal",Version:"2018-06-08",Region:e.region,UserClientIp:e.userClientIp,DealOwner:e.dealOwner,TranId:e.tranId,WxAppId:e.appId||transactor_1.getDefaultAppID()};await transactor_1.default(tcbContracts.tcbDeleteDealContract,t);return{}}async function tcbCheckEnvPackageModify(e){const t={Action:"CheckEnvPackageModify",Version:"2018-06-08",Region:e.region,PackageId:e.packageId,EnvId:e.envId},o=await transactor_1.default(tcbContracts.tcbCheckEnvPackageModifyContract,t);return{allowToModify:Boolean(o.AllowToModify),forceToModify:Boolean(o.ForceToModify),quotaOverlimitList:(o.QuotaOverlimitList||[]).map(e=>({resourceName:e.ResourceName||"",quotaName:e.QuotaName||"",quotaChName:e.QuotaChName||"",quotaUsaged:isNaN(e.QuotaUsaged)?-1:e.QuotaUsaged,unit:e.Unit||"",comments:e.Comments||""})),invoiceOverlimit:o.InvoiceOverlimit?{invoiceAmount:o.InvoiceOverlimit.InvoiceAmount,isAmountOverlimit:o.InvoiceOverlimit.IsAmountOverlimit,refundAmount:o.InvoiceOverlimit.RefundAmount}:void 0}}async function tcbDescribeBillingInfo(e){const t={Action:"DescribeBillingInfo",Version:"2018-06-08",Region:e.region,WxAppId:e.appId||transactor_1.getDefaultAppID(),EnvId:e.envId,NeedOrderInfo:e.needOrderInfo};return{envBillingInfoList:((await transactor_1.default(tcbContracts.tcbDescribeBillingInfoContract,t)).EnvBillingInfoList||[]).map(e=>({envId:e.EnvId,packageId:e.PackageId,isAutoRenew:e.IsAutoRenew,status:e.Status,payMode:e.PayMode,isolatedTime:common_1.strToDate(e.IsolatedTime),expireTime:common_1.strToDate(e.ExpireTime),createTime:common_1.strToDate(e.CreateTime),updateTime:common_1.strToDate(e.UpdateTime),isAlwaysFree:Boolean(e.IsAlwaysFree),paymentChannel:e.PaymentChannel,orderInfo:e.OrderInfo?{tranId:e.OrderInfo.TranId,packageId:e.OrderInfo.PackageId,tranType:e.OrderInfo.TranType,tranStatus:e.OrderInfo.TranStatus,updateTime:e.OrderInfo.UpdateTime,createTime:e.OrderInfo.CreateTime,payMode:e.OrderInfo.PayMode}:null,freeQuota:e.FreeQuota}))}}async function tcbDescribeNextExpireTime(e){const t={Action:"DescribeNextExpireTime",Version:"2018-06-08",Region:e.region,WxAppId:e.appId||transactor_1.getDefaultAppID(),EnvId:e.envId,TimeSpan:e.timeSpan,ForceNewBuy:e.forceNewBuy},o=await transactor_1.default(tcbContracts.tcbDescribeNextExpireTimeContract,t);return{expireTime:common_1.strToDate(o.ExpireTime)}}async function tcbDescribeInvoiceAmount(e){const t={Action:"DescribeInvoiceAmount",Version:"2018-06-08",Region:e.region,WxAppId:e.appId||transactor_1.getDefaultAppID()},o=await transactor_1.default(tcbContracts.tcbDescribeInvoiceAmountContract,t);return{invoicedAmount:isNaN(o.InvoicedAmount)?-1:o.InvoicedAmount,availableAmount:isNaN(o.AvailableAmount)?-1:o.AvailableAmount}}async function tcbDescribeInvoiceSubject(e){const t={Action:"DescribeInvoiceSubject",Version:"2018-06-08",Region:e.region,WxAppId:e.appId||transactor_1.getDefaultAppID()},o=await transactor_1.default(tcbContracts.tcbDescribeInvoiceSubjectContract,t);return{userType:o.UserType,invoiceHead:o.InvoiceHead||"",VATGeneral:o.VATGeneral?{taxPayerType:o.VATGeneral.TaxPayerType,taxPayerNumber:o.VATGeneral.TaxPayerNumber,bankDeposit:o.VATGeneral.BankDeposit,bankAccount:o.VATGeneral.BankAccount,registerAddress:o.VATGeneral.RegisterAddress,registerPhone:o.VATGeneral.RegisterPhone}:null,VATSpecial:o.VATSpecial?{taxPayerNumber:o.VATSpecial.TaxPayerNumber,bankDeposit:o.VATSpecial.BankDeposit,bankAccount:o.VATSpecial.BankAccount,registerAddress:o.VATSpecial.RegisterAddress,registerPhone:o.VATSpecial.RegisterPhone}:null,status:o.Status,statusMessage:o.StatusMessage||""}}async function tcbSetInvoiceSubject(e){const t={Action:"SetInvoiceSubject",Version:"2018-06-08",Region:e.region,WxAppId:e.appId||transactor_1.getDefaultAppID(),UserType:e.userType,InvoiceHead:e.invoiceHead,VATGeneral:e.VATGeneral?{TaxPayerType:e.VATGeneral.taxPayerType,TaxPayerNumber:e.VATGeneral.taxPayerNumber,BankDeposit:e.VATGeneral.bankDeposit,BankAccount:e.VATGeneral.bankAccount,RegisterAddress:e.VATGeneral.registerAddress,RegisterPhone:e.VATGeneral.registerPhone}:void 0,VATSpecial:e.VATSpecial?{TaxPayerNumber:e.VATSpecial.taxPayerNumber,BankDeposit:e.VATSpecial.bankDeposit,BankAccount:e.VATSpecial.bankAccount,RegisterAddress:e.VATSpecial.registerAddress,RegisterPhone:e.VATSpecial.registerPhone}:void 0};await transactor_1.default(tcbContracts.tcbSetInvoiceSubjectContract,t);return{}}async function tcbDescribeInvoicePostInfo(e){const t={Action:"DescribeInvoicePostInfo",Version:"2018-06-08",Region:e.region,WxAppId:e.appId||transactor_1.getDefaultAppID()};return{postInfoList:((await transactor_1.default(tcbContracts.tcbDescribeInvoicePostInfoContract,t)).PostInfoList||[]).map(e=>({postId:e.PostId||"",contact:e.Contact||"",province:e.Province||"",city:e.City||"",address:e.Address||"",postalCode:e.PostalCode||"",cellphone:e.Cellphone||""}))}}async function tcbCreateInvoicePostInfo(e){const t={Action:"CreateInvoicePostInfo",Version:"2018-06-08",Region:e.region,WxAppId:e.appId||transactor_1.getDefaultAppID(),Contact:e.contact,Province:e.province,City:e.city,Address:e.address,PostalCode:e.postalCode,Cellphone:e.cellphone};return{postId:(await transactor_1.default(tcbContracts.tcbCreateInvoicePostInfoContract,t)).PostId||""}}async function tcbModifyInvoicePostInfo(e){const t={Action:"ModifyInvoicePostInfo",Version:"2018-06-08",Region:e.region,PostId:e.postId,WxAppId:e.appId||transactor_1.getDefaultAppID(),Contact:e.contact,Province:e.province,City:e.city,Address:e.address,PostalCode:e.postalCode,Cellphone:e.cellphone};await transactor_1.default(tcbContracts.tcbModifyInvoicePostInfoContract,t);return{}}async function tcbDeleteInvoicePostInfo(e){const t={Action:"DeleteInvoicePostInfo",Version:"2018-06-08",Region:e.region,PostId:e.postId,WxAppId:e.appId||transactor_1.getDefaultAppID()};await transactor_1.default(tcbContracts.tcbDeleteInvoicePostInfoContract,t);return{}}async function tcbCreateInvoice(e){const t={Action:"CreateInvoice",Version:"2018-06-08",Region:e.region,PostId:e.postId,Amount:e.amount,Remark:e.remark,WxAppId:e.appId||transactor_1.getDefaultAppID()};await transactor_1.default(tcbContracts.tcbCreateInvoiceContract,t);return{}}async function tcbDescribeInvoiceList(e){const t={Action:"DescribeInvoiceList",Version:"2018-06-08",Region:e.region,StartTime:common_1.dateToStr(e.startTime),EndTime:common_1.dateToStr(e.endTime),Limit:e.limit,Offset:e.offset,WxAppId:e.appId||transactor_1.getDefaultAppID()},o=await transactor_1.default(tcbContracts.tcbDescribeInvoiceListContract,t);return{total:o.Total,invoiceList:(o.InvoiceList||[]).map(e=>({invoiceId:e.InvoiceId||"",userType:e.UserType||"",amount:isNaN(e.Amount)?-1:e.Amount,status:e.Status,invoiceTime:common_1.strToDate(e.InvoiceTime)}))}}async function tcbDescribeInvoiceDetail(e){const t={Action:"DescribeInvoiceDetail",Version:"2018-06-08",Region:e.region,InvoiceId:e.invoiceId,WxAppId:e.appId||transactor_1.getDefaultAppID()},o=await transactor_1.default(tcbContracts.tcbDescribeInvoiceDetailContract,t);return{amount:isNaN(o.Amount)?-1:o.Amount,invoiceNumber:o.InvoiceNumber,userType:o.UserType,invoiceHead:o.InvoiceHead,VATGeneral:o.VATGeneral?{taxPayerType:o.VATGeneral.TaxPayerType,taxPayerNumber:o.VATGeneral.TaxPayerNumber,bankDeposit:o.VATGeneral.BankDeposit,bankAccount:o.VATGeneral.BankAccount,registerAddress:o.VATGeneral.RegisterAddress,registerPhone:o.VATGeneral.RegisterPhone}:null,VATSpecial:o.VATSpecial?{taxPayerNumber:o.VATSpecial.TaxPayerNumber,bankDeposit:o.VATSpecial.BankDeposit,bankAccount:o.VATSpecial.BankAccount,registerAddress:o.VATSpecial.RegisterAddress,registerPhone:o.VATSpecial.RegisterPhone}:null,postInfo:{postId:o.PostInfo.PostId,contact:o.PostInfo.Contact,province:o.PostInfo.Province,city:o.PostInfo.City,address:o.PostInfo.Address,postalCode:o.PostInfo.PostalCode,cellphone:o.PostInfo.Cellphone},status:o.Status,postCompany:o.PostCompany||"",postNumber:o.PostNumber||"",invoiceTime:common_1.strToDate(o.InvoiceTime),remark:o.Remark||""}}async function tcbRevokeInvoice(e){const t={Action:"RevokeInvoice",Version:"2018-06-08",Region:e.region,InvoiceId:e.invoiceId,WxAppId:e.appId||transactor_1.getDefaultAppID()};await transactor_1.default(tcbContracts.tcbRevokeInvoiceContract,t);return{}}async function tcbDescribeAuthentification(e){const t={Action:"DescribeAuthentification",Version:"2018-06-08",Region:e.region,WxAppId:e.appId||transactor_1.getDefaultAppID()},o=await transactor_1.default(tcbContracts.tcbDescribeAuthentificationContract,t);return{authentificationName:o.AuthentificationName||"",authentificationType:o.AuthentificationType}}async function tcbDescribeEnvResourceException(e){const t={Action:"DescribeEnvResourceException",Version:"2018-06-08",Region:e.region,EnvId:e.envId,WxAppId:e.appId||transactor_1.getDefaultAppID()},o=await transactor_1.default(tcbContracts.tcbDescribeEnvResourceExceptionContract,t);return{storage:o.Storage?o.Storage.map(e=>({bucket:e.Bucket,COSStatus:e.COSStatus,COSRecoverJobId:e.COSRecoverJobId})):null,logService:o.LogService?o.LogService.map(e=>({logsetName:e.LogsetName,status:e.Status,functionUpdateJobId:e.FunctionUpdateJobId})):null}}async function tcbResourceRecover(e){const t={Action:"ResourceRecover",Version:"2018-06-08",Region:e.region,EnvId:e.envId,ResourceTypes:e.resourceTypes};return{results:(await transactor_1.default(tcbContracts.tcbResourceRecoverContract,t)).Results.map(e=>({result:e.Result,errorMessage:e.ErrorMessage,recoverJobId:e.RecoverJobId}))}}async function tcbDescribeResourceRecoverJob(e){const t={Action:"DescribeResourceRecoverJob",Version:"2018-06-08",Region:e.region,EnvId:e.envId,JobIds:e.jobIds,WxAppId:e.appId||transactor_1.getDefaultAppID()},o=await transactor_1.default(tcbContracts.tcbDescribeResourceRecoverJobContract,t);return{jobStatusSet:o.JobStatusSet?o.JobStatusSet.map(e=>({jobId:e.JobId,status:e.Status,errorMessage:e.ErrorMessage})):null}}async function tcbDescribeVouchersInfoByDeal(e){const t={Action:"DescribeVouchersInfoByDeal",Version:"2018-06-08",Region:e.region,TranId:e.tranId,Page:e.page,Size:e.size,Source:e.source||"miniapp"};return{vouchers:(await transactor_1.default(tcbContracts.tcbDescribeVouchersInfoByDealContract,t)).Vouchers.map(e=>({voucherId:e.VoucherId,ownerUin:e.OwnerUin,amount:e.Amount,leftAmount:e.LeftAmount,useDeadLine:e.UseDeadLine,status:e.Status||null,baseAmount:e.BaseAmount,reuse:e.Reuse}))}}async function tcbDescribeAllVouchersInfoByDeal(e,t=[],o=1){const r=e.size||100,{vouchers:a}=await tcbDescribeVouchersInfoByDeal({page:o,size:r,tranId:e.tranId,source:e.source});return a.length&&a.length>=r?tcbDescribeAllVouchersInfoByDeal(e,[...t,...a],o+1):{vouchers:[...t,...a]}}async function tcbDescribeAmountAfterDeduction(e){const t={Action:"DescribeAmountAfterDeduction",Version:"2018-06-08",Region:e.region,VoucherId:e.voucherId,TranId:e.tranId,Source:e.source||"miniapp"};return{amountAfterDeduction:(await transactor_1.default(tcbContracts.tcbDescribeAmountAfterDeductionContract,t)).AmountAfterDeduction}}async function tcbDescribeVouchersInfo(e){const t={Action:"DescribeVouchersInfo",Version:"2018-06-08",Region:e.region,Page:e.page,Size:e.size,Source:e.source||"miniapp"};return{vouchers:(await transactor_1.default(tcbContracts.tcbDescribeVouchersInfoContract,t)).Vouchers.map(e=>({voucherId:e.VoucherId,ownerUin:e.OwnerUin,amount:e.Amount,leftAmount:e.LeftAmount,useDeadLine:e.UseDeadLine,status:e.Status||null,baseAmount:e.BaseAmount,reuse:e.Reuse}))}}async function tcbDescribeAllVouchersInfo(e,t=[],o=1){const r=e.size||100,{vouchers:a}=await tcbDescribeVouchersInfo({page:o,size:r,source:e.source});return a.length&&a.length>=r?tcbDescribeAllVouchersInfo(e,[...t,...a],o+1):{vouchers:[...t,...a]}}async function tcbDescribeVoucherPlanAvailable(e){const t={Action:"DescribeVoucherPlanAvailable",Version:"2018-06-08",Region:e.region,ProductName:e.productName,WxAppId:e.appId||transactor_1.getDefaultAppID()},o=await transactor_1.default(tcbContracts.tcbDescribeVoucherPlanAvailableContract,t);return{voucherPlans:o.VoucherPlans||[],qualified:o.Qualified}}async function tcbApplyVoucher(e){const t={Action:"ApplyVoucher",Version:"2018-06-08",Region:e.region,ProductName:e.productName,WxAppId:e.appId||transactor_1.getDefaultAppID(),VoucherPlan:e.voucherPlan};return{applicationId:(await transactor_1.default(tcbContracts.tcbApplyVoucherContract,t)).ApplicationId}}async function tcbDescribeVoucherApplication(e){const t={Action:"DescribeVoucherApplication",Version:"2018-06-08",Region:e.region,WxAppId:e.appId||transactor_1.getDefaultAppID(),ProductName:e.productName,ApplicationId:e.applicationId};return{applications:((await transactor_1.default(tcbContracts.tcbDescribeVoucherApplicationContract,t)).Applications||[]).map(e=>({applicationId:e.ApplicationId,voucherPlan:e.VoucherPlan,status:e.Status,productName:e.ProductName}))}}async function tcbDeleteVoucherApplication(e){const t={Action:"DeleteVoucherApplication",Version:"2018-06-08",Region:e.region,ApplicationId:e.applicationId,WxAppId:e.appId||transactor_1.getDefaultAppID()};await transactor_1.default(tcbContracts.tcbDeleteVoucherApplicationContract,t);return{}}async function tcbDescribeMonitorResource(e){const t={Action:"DescribeMonitorResource",Version:"2018-06-08",Region:e.region};return{data:(await transactor_1.default(tcbContracts.tcbDescribeMonitorResourceContract,t)).Data.map(e=>({name:e.Name,index:e.Index,period:e.Period,enIndex:e.EnIndex,enName:e.EnName,indexUnit:e.IndexUnit,convergence:e.Convergence,convergenceName:e.ConvergenceName,periodNum:e.PeriodNum}))}}async function tcbDescribeMonitorPolicy(e){const t={Action:"DescribeMonitorPolicy",Version:"2018-06-08",Region:e.region,EnvId:e.envId,Source:e.source,DesRule:e.desRule?{ResType:e.desRule.resType,RecGroup:e.desRule.recGroup,RecUser:e.desRule.recUser,Object:e.desRule.object,Name:e.desRule.name,PolicyId:e.desRule.policyId}:e.desRule};return{data:(await transactor_1.default(tcbContracts.tcbDescribeMonitorPolicyContract,t)).Data.map(e=>({name:e.Name,note:e.Note,convergence:e.Convergence,policyId:e.PolicyId,resType:e.ResType,resName:e.ResName,objects:e.Objects||[],source:e.Source,activeStartTime:e.ActiveStartTime,activeEndTime:e.ActiveEndTime,alertChannels:e.AlertChannels||[],recGroups:e.RecGroups||[],recUsers:e.RecUsers||[],isActive:e.IsActive,isEdit:e.IsEdit}))}}async function tcbCreateMonitorPolicy(e){const t={Action:"CreateMonitorPolicy",Version:"2018-06-08",Region:e.region,WxAppId:e.wxAppId||transactor_1.getDefaultAppID(),EnvId:e.envId,Name:e.name,Convergence:e.convergence,Note:e.note,ResType:e.resType,ResName:e.resName,Objects:e.objects,Source:e.source,ActiveStartTime:e.activeStartTime,ActiveEndTime:e.activeEndTime,AlertChannels:e.alertChannels,RecGroups:e.recGroups,RecUsers:e.recUsers,IsActive:e.isActive};return{id:(await transactor_1.default(tcbContracts.tcbCreateMonitorPolicyContract,t)).Id}}async function tcbDeleteMonitorPolicy(e){const t={Action:"DeleteMonitorPolicy",Version:"2018-06-08",Region:e.region,EnvId:e.envId,PolicyId:e.policyId,Source:e.source};await transactor_1.default(tcbContracts.tcbDeleteMonitorPolicyContract,t);return{}}async function tcbModifyMonitorPolicy(e){const t={Action:"ModifyMonitorPolicy",Version:"2018-06-08",Region:e.region,PolicyId:e.policyId,WxAppId:e.wxAppId||transactor_1.getDefaultAppID(),EnvId:e.envId,Name:e.name,Convergence:e.convergence,Note:e.note,ResType:e.resType,ResName:e.resName,Objects:e.objects,Source:e.source,ActiveStartTime:e.activeStartTime,ActiveEndTime:e.activeEndTime,AlertChannels:e.alertChannels,RecGroups:e.recGroups,RecUsers:e.recUsers,IsActive:e.isActive};await transactor_1.default(tcbContracts.tcbModifyMonitorPolicyContract,t);return{}}async function tcbDescribeMonitorCondition(e){const t={Action:"DescribeMonitorCondition",Version:"2018-06-08",Region:e.region,EnvId:e.envId,PolicyId:e.policyId,Source:e.source};return{data:(await transactor_1.default(tcbContracts.tcbDescribeMonitorConditionContract,t)).Data.map(e=>({envId:e.EnvId,policyId:e.PolicyId,conditionId:e.ConditionId,metrics:e.Metrics,cmp:e.Cmp,threshold:e.Threshold,period:e.Period,periodNum:e.PeriodNum,convergence:e.Convergence,source:e.Source,isEdit:e.IsEdit}))}}async function tcbCreateMonitorCondition(e){const t={Action:"CreateMonitorCondition",Version:"2018-06-08",Region:e.region,EnvId:e.envId,PolicyId:e.policyId,Metrics:e.metrics,Cmp:e.cmp,Threshold:e.threshold,Period:e.period,PeriodNum:e.periodNum,Source:e.source,Convergence:e.convergence};return{id:(await transactor_1.default(tcbContracts.tcbCreateMonitorConditionContract,t)).Id}}async function tcbDeleteMonitorCondition(e){const t={Action:"DeleteMonitorCondition",Version:"2018-06-08",Region:e.region,EnvId:e.envId,PolicyId:e.policyId,ConditionId:e.conditionId,Source:e.source};await transactor_1.default(tcbContracts.tcbDeleteMonitorConditionContract,t);return{}}async function tcbModifyMonitorCondition(e){const t={Action:"ModifyMonitorCondition",Version:"2018-06-08",Region:e.region,ConditionId:e.conditionId,EnvId:e.envId,PolicyId:e.policyId,Metrics:e.metrics,Cmp:e.cmp,Threshold:e.threshold,Period:e.period,PeriodNum:e.periodNum,Source:e.source,Convergence:e.convergence};await transactor_1.default(tcbContracts.tcbModifyMonitorConditionContract,t);return{}}async function tcbDescribeDauData(e){const t={Action:"DescribeDauData",Version:"2018-06-08",Region:e.region,EnvId:e.envId,StartDate:e.startDate,EndDate:e.endDate,WxAppId:e.wxAppId||transactor_1.getDefaultAppID()};return{dauDataList:(await transactor_1.default(tcbContracts.tcbDescribeDauDataContract,t)).DauDataList.map(e=>({statDate:e.StatDate,amount:e.Amount}))}}async function tcbDescribeChangePay(e){const t={Action:"DescribeChangePay",Version:"2018-06-08",Region:e.region,EnvId:e.envId,ChangeWay:e.changeWay},o=await transactor_1.default(tcbContracts.tcbDescribeChangePayContract,t);return{changeable:o.Changeable,failReason:o.FailReason,refundAmount:o.RefundAmount,refundType:o.RefundType}}async function tcbDescribeRestoreHistory(e){const t={Action:"DescribeRestoreHistory",Version:"2018-06-08",Region:e.region,InstanceId:e.instanceId,Count:e.count,Page:e.page},o=await transactor_1.default(tcbContracts.tcbDescribeRestoreHistoryContract,t);return{total:o.Total,data:o.Data.map(e=>({operateTime:e.OperateTime,restoreTime:e.RestoreTime,restorTables:e.RestorTables}))}}async function tcbCommonServiceAPI(e){const t={Action:"CommonServiceAPI",Version:"2018-06-08",Region:e.region,Service:e.service,JSONData:e.jsonData};return{jsonResp:(await transactor_1.default(tcbContracts.tcbCommonServiceAPIContract,t)).JSONResp}}async function tcbCreatePostpayPackage(e){const t={Action:"CreatePostpayPackage",Version:"2018-06-08",Region:e.region,EnvId:e.envId,WxAppId:e.wxAppId||transactor_1.getDefaultAppID(),Source:e.source,FreeQuota:e.freeQuota,ChangePay:e.changePay,Alias:e.alias,Channel:e.alias?"ide":void 0,EnvSource:e.alias?"miniapp":void 0},o=await transactor_1.default(tcbContracts.tcbCreatePostpayPackageContract,t);return{tranId:o.TranId,envId:o.EnvId}}async function tcbInqueryPostpayPrice(e){const t={Action:"InqueryPostpayPrice",Version:"2018-06-08",Region:e.region};return{priceInfoList:(await transactor_1.default(tcbContracts.tcbInqueryPostpayPriceContract,t)).PriceInfoList.map(e=>({resourceType:e.ResourceType,resourceMetric:e.ResourceMetric,unitPrice:e.UnitPrice,metricUnit:e.MetricUnit}))}}async function tcbDescribePostpayFreeQuotas(e){const t={Action:"DescribePostpayFreeQuotas",Version:"2018-06-08",Region:e.region,EnvId:e.envId};return{freequotaInfoList:((await transactor_1.default(tcbContracts.tcbDescribePostpayFreeQuotasContract,t)).FreequotaInfoList||[]).map(e=>({resourceType:e.ResourceType,resourceMetric:e.ResourceMetric,freeQuota:e.FreeQuota,metricUnit:e.MetricUnit,deductType:e.DeductType,freeQuotaType:e.FreeQuotaType}))}}async function tcbModifyStorageSafeRule(e){const t={Action:"ModifyStorageSafeRule",Version:"2018-06-08",Region:e.region,Bucket:e.bucket,EnvId:e.envId,AclTag:e.aclTag,WxAppId:e.wxAppId||transactor_1.getDefaultAppID(),Rule:e.rule};await transactor_1.default(tcbContracts.tcbModifyStorageSafeRuleContract,t);return{}}async function tcbDescribeStorageSafeRule(e){const t={Action:"DescribeStorageSafeRule",Version:"2018-06-08",Region:e.region,EnvId:e.envId,Bucket:e.bucket,WxAppId:e.wxAppId||transactor_1.getDefaultAppID()},o=await transactor_1.default(tcbContracts.tcbDescribeStorageSafeRuleContract,t);return{aclTag:o.AclTag,rule:o.Rule}}async function tcbDescribeCDNChainTask(e){const t={Action:"DescribeCDNChainTask",Version:"2018-06-08",Region:e.region,Bucket:e.bucket,EnvId:e.envId};return{status:(await transactor_1.default(tcbContracts.tcbDescribeCDNChainTaskContract,t)).Status}}async function tcbDescribeLoginConfigs(e){const t={Action:"DescribeLoginConfigs",Version:"2018-06-08",Region:e.region,EnvId:e.envId};return{configList:(await transactor_1.default(tcbContracts.tcbDescribeLoginConfigsContract,t)).ConfigList.map(e=>({platform:e.Platform,platformId:e.PlatformId,createTime:e.CreateTime,updateTime:e.UpdateTime,status:e.Status,id:e.Id}))}}async function tcbCreateLoginConfig(e){const t={Action:"CreateLoginConfig",Version:"2018-06-08",Region:e.region,EnvId:e.envId,Platform:e.platform,PlatformId:e.platformId,PlatformSecret:e.platformSecret,Status:e.status};await transactor_1.default(tcbContracts.tcbCreateLoginConfigContract,t);return{}}async function tcbUpdateLoginConfig(e){const t={Action:"UpdateLoginConfig",Version:"2018-06-08",Region:e.region,EnvId:e.envId,ConfigId:e.configId,PlatformId:e.platformId,PlatformSecret:e.platformSecret,Status:e.status};await transactor_1.default(tcbContracts.tcbUpdateLoginConfigContract,t);return{}}async function tcbDescribeSecurityRule(e){const t={Action:"DescribeSecurityRule",Version:"2018-06-08",Region:e.region,EnvId:e.envId,ResourceType:e.resourceType,ResourceName:e.resourceName,WxAppId:e.wxAppId||transactor_1.getDefaultAppID(),OnlyTag:e.onlyTag},o=await transactor_1.default(tcbContracts.tcbDescribeSecurityRuleContract,t);return{aclTag:o.AclTag,rule:o.Rule}}async function tcbModifySecurityRule(e){const t={Action:"ModifySecurityRule",Version:"2018-06-08",Region:e.region,EnvId:e.envId,ResourceType:e.resourceType,AclTag:e.aclTag,ResourceName:e.resourceName,WxAppId:e.wxAppId||transactor_1.getDefaultAppID(),Rule:e.rule};await transactor_1.default(tcbContracts.tcbModifySecurityRuleContract,t);return{}}async function tcbCreateStaticStore(e){const t={Action:"CreateStaticStore",Version:"2018-06-08",Region:e.region,EnvId:e.envId};return{result:(await transactor_1.default(tcbContracts.tcbCreateStaticStoreContract,t)).Result}}async function tcbDestroyStaticStore(e){const t={Action:"DestroyStaticStore",Version:"2018-06-08",Region:e.region,EnvId:e.envId,CdnDomain:e.cdnDomain};return{result:(await transactor_1.default(tcbContracts.tcbDestroyStaticStoreContract,t)).Result}}async function tcbDescribeStaticStore(e){const t={Action:"DescribeStaticStore",Version:"2018-06-08",Region:e.region,EnvId:e.envId};return{data:((await transactor_1.default(tcbContracts.tcbDescribeStaticStoreContract,t)).Data||[]).map(e=>({envId:e.EnvId,cdnDomain:e.CdnDomain,bucket:e.Bucket,regoin:e.Regoin,status:e.Status}))}}async function tcbDescribeEnvLimit(e){const t={Action:"DescribeEnvLimit",Version:"2018-06-08",Region:e.region,Source:e.source},o=await transactor_1.default(tcbContracts.tcbDescribeEnvLimitContract,t);return{maxEnvNum:o.MaxEnvNum,currentEnvNum:o.CurrentEnvNum,maxFreeEnvNum:o.MaxFreeEnvNum,currentFreeEnvNum:o.CurrentFreeEnvNum,maxDeleteTotal:o.MaxDeleteTotal,currentDeleteTotal:o.CurrentDeleteTotal,maxDeleteMonthly:o.MaxDeleteMonthly,currentDeleteMonthly:o.CurrentDeleteMonthly}}async function tcbDescribeAccountInfoByPlatformId(e){const t={Action:"DescribeAccountInfoByPlatformId",Version:"2018-06-08",Region:e.region,Platform:e.platform,PlatformId:e.platformId},o=await transactor_1.default(tcbContracts.tcbDescribeAccountInfoByPlatformIdContract,t);return{uin:o.Uin,nickName:o.NickName,isAuth:o.IsAuth}}async function tcbDescribeEnvFreeQuota(e){const t={Action:"DescribeEnvFreeQuota",Version:"2018-06-08",Region:e.region,EnvId:e.envId,ResourceTypes:e.resourceTypes};return{quotaItems:((await transactor_1.default(tcbContracts.tcbDescribeEnvFreeQuotaContract,t)).QuotaItems||[]).map(e=>({resourceType:e.ResourceType,metricName:e.MetricName,value:e.Value,startTime:e.StartTime,endTime:e.EndTime}))}}async function tcbDescribeHostingDomain(e){const t={Action:"DescribeHostingDomain",Version:"2018-06-08",Region:e.region,EnvId:e.envId,Offset:e.offset,Limit:e.limit},o=await transactor_1.default(tcbContracts.tcbDescribeHostingDomainContract,t);return{totalCount:o.TotalCount,domainSet:(o.DomainSet||[]).map(e=>({domain:e.Domain,certId:e.CertId,status:e.Status,cName:e.CName,updateTime:e.UpdateTime,createTime:e.CreateTime,dnsStatus:e.DnsStatus,statusMessage:e.StatusMessage}))}}async function tcbDescribeCloudBaseRunResource(e){const t={Action:"DescribeCloudBaseRunResource",Version:"2018-06-08",Region:e.region,EnvId:e.envId,NeedSubnet:e.needSubnet},o=await transactor_1.default(tcbContracts.tcbDescribeCloudBaseRunResourceContract,t);return{clusterStatus:o.ClusterStatus,virtualClusterId:o.VirtualClusterId,vpcId:o.VpcId,region:o.Region,subnetIds:(o.SubnetIds||[]).map(e=>({id:e.Id,cidr:e.Cidr,zone:e.Zone,type:e.Type,target:e.Target,region:e.Region,name:e.Name}))}}async function tcbDescribeCloudBaseRunServers(e){const t={Action:"DescribeCloudBaseRunServers",Version:"2018-06-08",Region:e.region,EnvId:e.envId,Offset:e.offset,Limit:e.limit,ServerName:e.serverName},o=await transactor_1.default(tcbContracts.tcbDescribeCloudBaseRunServersContract,t);return{totalCount:o.TotalCount,cloudBaseRunServerSet:(o.CloudBaseRunServerSet||[]).map(e=>({serverName:e.ServerName,createdTime:e.CreatedTime,updatedTime:e.UpdatedTime,isPublic:e.IsPublic,imageRepo:e.ImageRepo,vpcId:e.VpcId,serviceRemark:e.ServiceRemark,trafficType:e.TrafficType,allowDeleteImageRepo:e.AllowDeleteImageRepo,natIp:e.NatIp||[]}))}}async function tcbCreateCloudBaseRunResource(e){const t={Action:"CreateCloudBaseRunResource",Version:"2018-06-08",Region:e.region,EnvId:e.envId,VpcId:e.vpcId,SubnetIds:e.subnetIds};return{result:(await transactor_1.default(tcbContracts.tcbCreateCloudBaseRunResourceContract,t)).Result}}async function tcbDescribeCloudBaseRunBuildServer(e){const t={Action:"DescribeCloudBaseRunBuildServer",Version:"2018-06-08",Region:e.region,EnvId:e.envId,Business:e.business},o=await transactor_1.default(tcbContracts.tcbDescribeCloudBaseRunBuildServerContract,t);return{packageRepositoryId:o.PackageRepositoryId,packageRepositoryName:o.PackageRepositoryName,imageNamespace:o.ImageNamespace,projectGlobalKey:o.ProjectGlobalKey,projectToken:o.ProjectToken,projectName:o.ProjectName,teamGlobalKey:o.TeamGlobalKey,projectId:o.ProjectId}}async function tcbDescribeCloudBaseRunServer(e){const t={Action:"DescribeCloudBaseRunServer",Version:"2018-06-08",Region:e.region,EnvId:e.envId,ServerName:e.serverName,Offset:e.offset,Limit:e.limit,VersionName:e.versionName},o=await transactor_1.default(tcbContracts.tcbDescribeCloudBaseRunServerContract,t);return{totalCount:o.TotalCount,versionItems:(o.VersionItems||[]).map(e=>({versionName:e.VersionName,status:e.Status,flowRatio:e.FlowRatio,createdTime:e.CreatedTime,updatedTime:e.UpdatedTime,buildId:e.BuildId,uploadType:e.UploadType,remark:e.Remark,urlParam:e.UrlParam?{key:e.UrlParam.Key,value:e.UrlParam.Value}:e.UrlParam,priority:e.Priority,isDefaultPriority:e.IsDefaultPriority,flowParams:(e.FlowParams||[]).map(e=>({key:e.Key,value:e.Value,priority:e.Priority}))})),serverName:o.ServerName,isPublic:o.IsPublic,imageRepo:o.ImageRepo,trafficType:o.TrafficType}}async function tcbDescribeCloudBaseRunContainerSpec(e){const t={Action:"DescribeCloudBaseRunContainerSpec",Version:"2018-06-08",Region:e.region};return{containerStandards:(await transactor_1.default(tcbContracts.tcbDescribeCloudBaseRunContainerSpecContract,t)).ContainerStandards.map(e=>({cpus:e.Cpus,mems:e.Mems}))}}async function tcbCreateCloudBaseRunServerVersion(e){var t;const o={Action:"CreateCloudBaseRunServerVersion",Version:"2018-06-08",Region:e.region,EnvId:e.envId,UploadType:e.uploadType,FlowRatio:e.flowRatio,Cpu:e.cpu,Mem:e.mem,MinNum:e.minNum,MaxNum:e.maxNum,PolicyType:e.policyType,PolicyThreshold:e.policyThreshold,ContainerPort:e.containerPort,ServerName:e.serverName,RepositoryType:e.repositoryType,DockerfilePath:e.dockerfilePath,BuildDir:e.buildDir,EnvParams:e.envParams,Repository:e.repository,Branch:e.branch,VersionRemark:e.versionRemark,PackageName:e.packageName,PackageVersion:e.packageVersion,ImageInfo:e.imageInfo?{RepositoryName:e.imageInfo.repositoryName,IsPublic:e.imageInfo.isPublic,TagName:e.imageInfo.tagName,ServerAddr:e.imageInfo.serverAddr,ImageUrl:e.imageInfo.imageUrl}:e.imageInfo,CodeDetail:e.codeDetail?{Name:e.codeDetail.name?{Name:e.codeDetail.name.name,FullName:e.codeDetail.name.fullName}:e.codeDetail.name,Url:e.codeDetail.url}:e.codeDetail,ImageSecretInfo:e.imageSecretInfo?{RegistryServer:e.imageSecretInfo.registryServer,UserName:e.imageSecretInfo.userName,Password:e.imageSecretInfo.password,Email:e.imageSecretInfo.email}:e.imageSecretInfo,ImagePullSecret:e.imagePullSecret,CustomLogs:e.customLogs,InitialDelaySeconds:e.initialDelaySeconds,MountVolumeInfo:null===(t=e.mountVolumeInfo)||void 0===t?void 0:t.map(e=>{var t;return{Name:e.name,MountPath:e.mountPath,ReadOnly:e.readOnly,NfsVolumes:null===(t=e.nfsVolumes)||void 0===t?void 0:t.map(e=>({Server:e.server,Path:e.path,ReadOnly:e.readOnly}))}}),AddIntranetDns:e.addIntranetDns},r=await transactor_1.default(tcbContracts.tcbCreateCloudBaseRunServerVersionContract,o);return{result:r.Result,versionName:r.VersionName}}async function tcbDescribeCloudBaseRunServerVersion(e){const t={Action:"DescribeCloudBaseRunServerVersion",Version:"2018-06-08",Region:e.region,EnvId:e.envId,ServerName:e.serverName,VersionName:e.versionName},o=await transactor_1.default(tcbContracts.tcbDescribeCloudBaseRunServerVersionContract,t);return{versionName:o.VersionName,remark:o.Remark,dockerfilePath:o.DockerfilePath,buildDir:o.BuildDir,cpu:o.Cpu,mem:o.Mem,minNum:o.MinNum,maxNum:o.MaxNum,policyType:o.PolicyType,policyThreshold:o.PolicyThreshold,envParams:o.EnvParams,createdTime:o.CreatedTime,updatedTime:o.UpdatedTime,versionIp:o.VersionIp,versionPort:o.VersionPort,status:o.Status,packageName:o.PackageName,packageVersion:o.PackageVersion,uploadType:o.UploadType,repoType:o.RepoType,repo:o.Repo,branch:o.Branch,serverName:o.ServerName,isPublic:o.IsPublic,vpcId:o.VpcId,subnetIds:o.SubnetIds||[],customLogs:o.CustomLogs,containerPort:o.ContainerPort,initialDelaySeconds:o.InitialDelaySeconds,imageUrl:o.ImageUrl}}exports.tcbGetUsers=tcbGetUsers,exports.tcbGetDbDistribution=tcbGetDbDistribution,exports.tcbGetStorageACL=tcbGetStorageACL,exports.tcbGetMonitorData=tcbGetMonitorData,exports.tcbDescribeCurveData=tcbDescribeCurveData,exports.tcbGetStorageACLTask=tcbGetStorageACLTask,exports.tcbModifyStorageACL=tcbModifyStorageACL,exports.tcbDescribeDatabaseACL=tcbDescribeDatabaseACL,exports.tcbModifyDatabaseACL=tcbModifyDatabaseACL,exports.tcbDatabaseMigrateImport=tcbDatabaseMigrateImport,exports.tcbDatabaseMigrateExport=tcbDatabaseMigrateExport,exports.tcbDatabaseMigrateQueryInfo=tcbDatabaseMigrateQueryInfo,exports.tcbModifySafeRule=tcbModifySafeRule,exports.tcbDescribeSafeRule=tcbDescribeSafeRule,exports.tcbCheckEnvId=tcbCheckEnvId,exports.tcbCreateEnvAndResource=tcbCreateEnvAndResource,exports.tcbDescribePackages=tcbDescribePackages,exports.tcbInqueryPrice=tcbInqueryPrice,exports.tcbCreateDeal=tcbCreateDeal,exports.tcbDescribePayInfo=tcbDescribePayInfo,exports.tcbQueryDeals=tcbQueryDeals,exports.tcbQueryAllDeals=tcbQueryAllDeals,exports.tcbCancelDeal=tcbCancelDeal,exports.tcbDeleteDeal=tcbDeleteDeal,exports.tcbCheckEnvPackageModify=tcbCheckEnvPackageModify,exports.tcbDescribeBillingInfo=tcbDescribeBillingInfo,exports.tcbDescribeNextExpireTime=tcbDescribeNextExpireTime,exports.tcbDescribeInvoiceAmount=tcbDescribeInvoiceAmount,exports.tcbDescribeInvoiceSubject=tcbDescribeInvoiceSubject,exports.tcbSetInvoiceSubject=tcbSetInvoiceSubject,exports.tcbDescribeInvoicePostInfo=tcbDescribeInvoicePostInfo,exports.tcbCreateInvoicePostInfo=tcbCreateInvoicePostInfo,exports.tcbModifyInvoicePostInfo=tcbModifyInvoicePostInfo,exports.tcbDeleteInvoicePostInfo=tcbDeleteInvoicePostInfo,exports.tcbCreateInvoice=tcbCreateInvoice,exports.tcbDescribeInvoiceList=tcbDescribeInvoiceList,exports.tcbDescribeInvoiceDetail=tcbDescribeInvoiceDetail,exports.tcbRevokeInvoice=tcbRevokeInvoice,exports.tcbDescribeAuthentification=tcbDescribeAuthentification,exports.tcbDescribeEnvResourceException=tcbDescribeEnvResourceException,exports.tcbResourceRecover=tcbResourceRecover,exports.tcbDescribeResourceRecoverJob=tcbDescribeResourceRecoverJob,exports.tcbDescribeVouchersInfoByDeal=tcbDescribeVouchersInfoByDeal,exports.tcbDescribeAllVouchersInfoByDeal=tcbDescribeAllVouchersInfoByDeal,exports.tcbDescribeAmountAfterDeduction=tcbDescribeAmountAfterDeduction,exports.tcbDescribeVouchersInfo=tcbDescribeVouchersInfo,exports.tcbDescribeAllVouchersInfo=tcbDescribeAllVouchersInfo,exports.tcbDescribeVoucherPlanAvailable=tcbDescribeVoucherPlanAvailable,exports.tcbApplyVoucher=tcbApplyVoucher,exports.tcbDescribeVoucherApplication=tcbDescribeVoucherApplication,exports.tcbDeleteVoucherApplication=tcbDeleteVoucherApplication,exports.tcbDescribeMonitorResource=tcbDescribeMonitorResource,exports.tcbDescribeMonitorPolicy=tcbDescribeMonitorPolicy,exports.tcbCreateMonitorPolicy=tcbCreateMonitorPolicy,exports.tcbDeleteMonitorPolicy=tcbDeleteMonitorPolicy,exports.tcbModifyMonitorPolicy=tcbModifyMonitorPolicy,exports.tcbDescribeMonitorCondition=tcbDescribeMonitorCondition,exports.tcbCreateMonitorCondition=tcbCreateMonitorCondition,exports.tcbDeleteMonitorCondition=tcbDeleteMonitorCondition,exports.tcbModifyMonitorCondition=tcbModifyMonitorCondition,exports.tcbDescribeDauData=tcbDescribeDauData,exports.tcbDescribeChangePay=tcbDescribeChangePay,exports.tcbDescribeRestoreHistory=tcbDescribeRestoreHistory,exports.tcbCommonServiceAPI=tcbCommonServiceAPI,exports.tcbCreatePostpayPackage=tcbCreatePostpayPackage,exports.tcbInqueryPostpayPrice=tcbInqueryPostpayPrice,exports.tcbDescribePostpayFreeQuotas=tcbDescribePostpayFreeQuotas,exports.tcbModifyStorageSafeRule=tcbModifyStorageSafeRule,exports.tcbDescribeStorageSafeRule=tcbDescribeStorageSafeRule,exports.tcbDescribeCDNChainTask=tcbDescribeCDNChainTask,exports.tcbDescribeLoginConfigs=tcbDescribeLoginConfigs,exports.tcbCreateLoginConfig=tcbCreateLoginConfig,exports.tcbUpdateLoginConfig=tcbUpdateLoginConfig,exports.tcbDescribeSecurityRule=tcbDescribeSecurityRule,exports.tcbModifySecurityRule=tcbModifySecurityRule,exports.tcbCreateStaticStore=tcbCreateStaticStore,exports.tcbDestroyStaticStore=tcbDestroyStaticStore,exports.tcbDescribeStaticStore=tcbDescribeStaticStore,exports.tcbDescribeEnvLimit=tcbDescribeEnvLimit,exports.tcbDescribeAccountInfoByPlatformId=tcbDescribeAccountInfoByPlatformId,exports.tcbDescribeEnvFreeQuota=tcbDescribeEnvFreeQuota,exports.tcbDescribeHostingDomain=tcbDescribeHostingDomain,exports.tcbDescribeCloudBaseRunResource=tcbDescribeCloudBaseRunResource,exports.tcbDescribeCloudBaseRunServers=tcbDescribeCloudBaseRunServers,exports.tcbCreateCloudBaseRunResource=tcbCreateCloudBaseRunResource,exports.tcbDescribeCloudBaseRunBuildServer=tcbDescribeCloudBaseRunBuildServer,exports.tcbDescribeCloudBaseRunServer=tcbDescribeCloudBaseRunServer,exports.tcbDescribeCloudBaseRunContainerSpec=tcbDescribeCloudBaseRunContainerSpec,exports.tcbCreateCloudBaseRunServerVersion=tcbCreateCloudBaseRunServerVersion,exports.tcbDescribeCloudBaseRunServerVersion=tcbDescribeCloudBaseRunServerVersion;